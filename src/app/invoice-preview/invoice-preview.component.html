<!-- PDF Content Area -->
<h2 class="invoice-title" style="text-align: center; margin-bottom: 20px;">Invoice Preview</h2>

<div #invoiceContent class="invoice-container" style="padding: 20px; border: 1px solid #ccc; border-radius: 10px; background-color: #fff;">

  <!-- Header Section -->
  <div class="invoice-header" style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
    <div class="logo-and-details">
      <img src="https://nims.nihilent.com/hrms/images/login_logo.jpg" alt="Logo" style="width: 100px; height: 100px;" />
    </div>
    <div class="company-info" style="flex: 1; text-align: right;">
      <p>{{ invoiceData.companyAddress }}</p>
    </div>
  </div>

  <!-- Billing Info -->
  <div class="billing-section" style="display: flex; gap: 20px; margin-bottom: 30px;">
    <div class="bill-to" style="flex: 1; border: 1px solid #ccc; padding: 15px; border-radius: 8px; background-color: #f9f9f9;">
      <h3>Billed To</h3>
      <p><strong>Name:</strong> {{ invoiceData.clientName }}</p>
      <p><strong>Address:</strong> {{ invoiceData.streetAddress }}</p>
      <p><strong>City/State/Country:</strong> {{ invoiceData.cityStateCountry }}</p>
      <p><strong>Zip Code:</strong> {{ invoiceData.zipCode }}</p>
    </div>

    <div style="flex: 1; border: 1px solid #ccc; padding: 15px; border-radius: 8px; background-color: #f9f9f9;">
      <h3>Invoice Details</h3>
      <p><strong>Invoice Number:</strong> {{ invoiceData.invoiceNumber }}</p>
      <p><strong>Date of Issue:</strong> {{ invoiceData.date }}</p>
      <p><strong>Client:</strong> {{ invoiceData.clientName }}</p>
      <p><strong>City / Country:</strong> {{ invoiceData.cityStateCountry }}</p>
    </div>
  </div>

  <!-- Items Table -->
  <table class="item-table" style="width: 100%; border-collapse: collapse; margin-bottom: 20px;">
    <thead style="background-color: #f0f0f0;">
      <tr>
        <th style="padding: 8px; border: 1px solid #ccc;">Item Name</th>
        <th style="padding: 8px; border: 1px solid #ccc;">Quantity</th>
        <th style="padding: 8px; border: 1px solid #ccc;">Price</th>
        <th style="padding: 8px; border: 1px solid #ccc;">Subtotal</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let item of invoiceData.items">
        <td style="padding: 8px; border: 1px solid #ccc;">{{ item.name }}</td>
        <td style="padding: 8px; border: 1px solid #ccc;">{{ item.qty }}</td>
        <td style="padding: 8px; border: 1px solid #ccc;">{{ item.price | currency:'INR':'symbol' }}</td>
        <td style="padding: 8px; border: 1px solid #ccc;">{{ item.qty * item.price | currency:'INR':'symbol' }}</td>
      </tr>
    </tbody>
  </table>

  <!-- Totals -->
  <div class="totals" style="text-align: right; margin-bottom: 20px;">
    <p><strong>Total:</strong> {{ getTotal() | currency:'INR':'symbol' }}</p>
  </div>

  <!-- QR Code -->
  <div *ngIf="qrImage" class="qr-section" style="text-align: center; margin-bottom: 20px;">
    <h3>QR Code</h3>
    <img [src]="'data:image/png;base64,' + qrImage" alt="QR Code" style="width: 120px; height: 120px;" />
  </div>

  <!-- Download Button -->
  <div style="text-align: center; margin-top: 30px;">
    <button
      (click)="downloadPDF()"
      [disabled]="!isDownloadEnabled()"
      [ngStyle]="{ 'cursor': isDownloadEnabled() ? 'pointer' : 'not-allowed', 'background-color': isDownloadEnabled() ? '#007bff' : '#ccc', 'color': 'white', 'border': 'none' }"
      style="padding: 10px 20px; font-weight: bold; border-radius: 5px;">
      Download PDF
    </button>
  </div>
</div>
